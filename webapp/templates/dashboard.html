<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="60">
    <title>HealthCheckr Dashboard</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f4f7f6; color: #333; margin: 0; padding: 2rem; }
        .container { max-width: 1100px; margin: 0 auto; }
        h1 { color: #2c3e50; text-align: center; }
        table { width: 100%; margin: 2rem 0; border-collapse: collapse; box-shadow: 0 2px 15px rgba(0,0,0,0.1); background: #fff; border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px 15px; text-align: left; }
        thead { background-color: #34495e; color: #fff; }
        tbody tr { border-bottom: 1px solid #ddd; }
        tbody tr:nth-of-type(even) { background-color: #f9f9f9; }
        .status { font-weight: bold; padding: 5px 10px; border-radius: 5px; color: #fff; text-align: center; display: inline-block; }
        .status-ok { background-color: #27ae60; }
        .status-error { background-color: #c0392b; }
        .status-unknown { background-color: #7f8c8d; }
        .form-container { display: flex; gap: 10px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 15px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        .form-container form { display: flex; width: 100%; gap: 10px; }
        .form-container input { padding: 10px; border: 1px solid #ccc; border-radius: 4px; flex-grow: 1; }
        .form-container input[name="url"] { flex-basis: 50%; }
        .form-container input[name="email"] { flex-basis: 40%; }
        .form-container button { padding: 10px 15px; border: none; background-color: #3498db; color: white; border-radius: 4px; cursor: pointer; }
        .form-container button:hover { background-color: #2980b9; }
        .delete-link { color: #c0392b; text-decoration: none; font-size: 0.9em; }
        .delete-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
<div class="container">
    <h1>HealthCheckr Dashboard</h1>
    <div class="form-container">
        <form action="/add" method="POST">
            <input type="text" name="url" placeholder="https://example.com" required>
            <input type="email" name="email" placeholder="alert-email@example.com (optional)">
            <button type="submit">Add Site</button>
        </form>
    </div>

    <table>
        <thead>
            <tr>
                <th>Website URL</th>
                <th>Alert Email</th>
                <th>Status</th>
                <th>Response Time (ms)</th>
                <th>Last Checked</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for check in checks %}
            <tr>
                <td><a href="{{ check.url }}" target="_blank">{{ check.url }}</a></td>
                <td>{{ check.notification_email if check.notification_email else 'N/A' }}</td>
                <td>
                    {% if check.status_code == 200 %}
                        <span class="status status-ok">OK ({{ check.status_code }})</span>
                    {% elif check.status_code %}
                        <span class="status status-error">ERROR ({{ check.status_code }})</span>
                    {% else %}
                        <span class="status status-unknown">UNKNOWN</span>
                    {% endif %}
                </td>
                <td>{{ check.response_time_ms }} ms</td>
                <td>{{ check.checked_at.strftime('%Y-%m-%d %H:%M:%S') if check.checked_at }}</td>
                <td>
                    <a href="{{ url_for('delete_website', url=check.url) }}" class="delete-link" onclick="return confirm('Are you sure?')">Delete</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" style="text-align: center;">No websites are being monitored yet. Add one above to start!</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>